<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>map of c-base</title>

		<!-- Bootstrap -->
		<link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="static/leaflet-0.7.2/leaflet.css" rel="stylesheet">

		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
		</head>
	<body>
		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					<h1>map of c-base</h1>
				</div><!-- /.col -->
			</div><!-- /.row -->
			
			<div class="row">
				<div class="col-xs-12">
					
					<div id="map" style="height: 500px;"></div>
					
				</div><!-- /.col -->
			</div><!-- /.row -->
			
			<div class="row">
				<div class="col-xs-12">
					Copyright 2014 &copy; by c-base e.V.
				</div><!-- /.col -->
			</div><!-- /.row -->
  	
		</div><!-- /.container -->
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="bower_components/jquery/dist/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="bower_components/handlebars/handlebars.min.js"></script>
		
		<script src="static/leaflet-0.7.2/leaflet.js"></script>
		<script src="icons.js"></script>
		<script src="markers.js"></script>
		

		<!-- this describes how map marker popups are gonna look like -->
		<script type="text/x-handlebars-template" id="popup-template">
			<b>{{ name }}</b><br />
			{{ desc }}<br />
			<br />
			<a href="{{ url }}">Go on my dear ...</a>
		</script>

		<script type="text/javascript">		
		var app = app || {};
		
		$(document).ready(function() {			
					
			var map = L.map('map', {
				minZoom: 0,
				maxZoom: 6,
				zoom: 3,
				center: [30,20],
				maxBounds: [[-80,-180],[80,180]]
			});

			L.tileLayer('map-tiles/{z}/{x}/{y}.jpg', {
			    attribution: '<a href="http://c-base.org/">c-base e.V.</a>!',
			    noWrap: true
			}).addTo(map);
			
			var source  = $("#popup-template").html();
			var template = Handlebars.compile(source);
			
			$.each(app.markers, function() {
				var icon;			
				if(this.icon !== undefined) {
					icon = this.icon
				} else {
					icon = app.blue_icon;
				}
				var marker = L.marker(this.coord, {icon: icon}).addTo(map);
				
				var html = template(this);
				marker.bindPopup(html);
				
			});
			
		});
		
		</script>
	</body>
</html>
